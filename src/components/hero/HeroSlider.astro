<section class="sandbox__carousel max-w-7xl mx-auto px-10 relative pb-10">
  <div class="embla">
    <div class="embla__viewport">
      <div class="embla__container cursor-grab">
        <div class="embla__slide">
          <img class="embla__slide__img" src="/gallery-1/1.webp" alt="" />
        </div>
        <div class="embla__slide">
          <img class="embla__slide__img" src="/gallery-1/2.webp" alt="" />
        </div>
        <div class="embla__slide">
          <img class="embla__slide__img" src="/gallery-1/3.webp" alt="" />
        </div>
      </div>

      <div
        class="w-full flex justify-between items-center absolute top-[40%] z-10 left-0 right-0 px-2"
      >
        <button class="embla__prev text-7xl font-thin">&#8249;</button>
        <button class="embla__next text-7xl font-thin relative">&#8250;</button>
      </div>
    </div>
  </div>
</section>

<style>
  .embla {
    --slide-spacing: 40px;
    --slide-size: 33.33%;
    --slide-height: 19rem;
    padding: 1.6rem;
  }

  @media (max-width: 768px) {
    .embla {
      --slide-size: 50%;
      --slide-height: 25rem;
    }
  }

  @media (max-width: 640px) {
    .embla {
      --slide-size: 100%;
      --slide-height: 25rem;
      padding: 1rem;
    }
  }

  .embla__viewport {
    overflow: hidden;
  }
  .embla__container {
    backface-visibility: hidden;
    display: flex;
    touch-action: pan-y;
    margin-left: calc(var(--slide-spacing) * -1);
  }
  .embla__slide {
    flex: 0 0 var(--slide-size);
    min-width: 0;
    padding-left: var(--slide-spacing);
    position: relative;
  }
  .embla__slide__img {
    display: block;
    height: var(--slide-height);
    width: 100%;
    object-fit: cover;
  }
</style>

<script>
  import EmblaCarousel from 'embla-carousel'

  const OPTIONS = { slidesToScroll: 'auto', containScroll: 'trimSnaps' }

  const emblaNode = document.querySelector('.embla')
  const viewportNode = emblaNode.querySelector('.embla__viewport')
  const prevButtonNode = emblaNode.querySelector('.embla__prev')
  const nextButtonNode = emblaNode.querySelector('.embla__next')

  // @ts-ignore
  const embla = EmblaCarousel(viewportNode, OPTIONS)
  prevButtonNode.addEventListener('click', embla.scrollPrev, false)
  nextButtonNode.addEventListener('click', embla.scrollNext, false)
</script>
